{
  "posts": [
    {
      "content": "Shiro å¯†ç åŠ å¯†",
      "data": {
        "title": "Shiro å¯†ç åŠ å¯†",
        "date": "2019-11-14 23:54:05",
        "tags": [],
        "published": false,
        "hideInList": false,
        "feature": null
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "shiro-mi-ma-jia-mi"
    },
    {
      "content": "å‰é¢å‡ ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬æåˆ°Shiroçš„å‡ ä¸ªä¸»è¦åŠŸèƒ½ä¸­ï¼Œå…¶ä¸­è¿˜åŒ…æ‹¬äº†æƒé™è®¤è¯ï¼Œé‚£ä¹ˆè¿™ä¸€èŠ‚ æˆ‘ä»¬å°±ç®€å•ä½“éªŒä¸€ä¸‹Shiroçš„æƒé™è®¤è¯å§ã€‚\r\n<!-- more -->\r\n## 1ã€å®ç°æƒé™è®¤è¯é€»è¾‘\r\nåŸºäºå‰é¢çš„æ–‡ç« ï¼Œè‡ªå®šä¹‰Realmç»§æ‰¿AuthorizingRealm éœ€è¦å®ç°doGetAuthenticationInfo å’Œ doGetAuthorizationInfo,å…¶ä¸­doGetAuthenticationInfoä¸»è¦ç”¨æ¥èº«ä»½è®¤è¯ï¼ŒdoGetAuthorizationInfoä¸»è¦ç”¨æ¥è¿›è¡Œæƒé™è®¤è¯ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š\r\nå‰ç½®ä»£ç ï¼š\r\n```Java\r\n    private static final Map<String,Set<String>> USER_ROLE= new HashMap<>();\r\n    static {\r\n        USER_ROLE.put(\"1\",new HashSet<>(Arrays.asList(\"item:add\",\"item:search\",\"item:update\",\"item:delete\")));\r\n        USER_ROLE.put(\"2\",new HashSet<>(Arrays.asList(\"item:add\",\"item:search\")));\r\n    }\r\n\r\n    @Override\r\n    public Set<String> getUserRoles(String userId) {\r\n        Set<String> result = USER_ROLE.get(userId);\r\n        return result!=null?result:Collections.EMPTY_SET;\r\n    }\r\n```\r\n```Java\r\n    @Override\r\n    protected AuthorizationInfo doGetAuthorizationInfo(PrincipalCollection principalCollection) {\r\n        log.info(\"å¼€å§‹è¿›è¡Œæƒé™è®¤è¯ï¼\");\r\n        SimpleAuthorizationInfo simpleAuthorizationInfo=new SimpleAuthorizationInfo();\r\n        String userId = (String)principalCollection.getPrimaryPrincipal();\r\n        Set<String> userRoles = roleService.getUserRoles(userId);\r\n        for (String userRole:userRoles){\r\n            simpleAuthorizationInfo.addStringPermission(userRole);\r\n        }\r\n        return simpleAuthorizationInfo;\r\n    }\r\n```\r\n## 2ã€é…ç½®LifecycleBeanPostProcessorã€DefaultAdvisorAutoProxyCreatorã€AuthorizationAttributeSourceAdvisor\r\nå› ä¸ºShiroéœ€è¦å¯¹Controllerè¿›è¡Œä»£ç†ï¼Œæ‰€ä»¥éœ€è¦å¼€å¯Controllerçš„ä»£ç†ï¼Œéœ€è¦é…ç½®LifecycleBeanPostProcessorã€DefaultAdvisorAutoProxyCreatorã€AuthorizationAttributeSourceAdvisor\r\n```Java\r\n    @Bean\r\n    public LifecycleBeanPostProcessor lifecycleBeanPostProcessor(){\r\n        return new LifecycleBeanPostProcessor();\r\n    }\r\n    @Bean\r\n    public DefaultAdvisorAutoProxyCreator defaultAdvisorAutoProxyCreator(){\r\n        DefaultAdvisorAutoProxyCreator creator=new DefaultAdvisorAutoProxyCreator();\r\n        creator.setProxyTargetClass(true);\r\n        return creator;\r\n    }\r\n    @Bean\r\n    public AuthorizationAttributeSourceAdvisor authorizationAttributeSourceAdvisor(SecurityManager securityManager) {\r\n        AuthorizationAttributeSourceAdvisor advisor=new AuthorizationAttributeSourceAdvisor();\r\n        advisor.setSecurityManager(securityManager);\r\n        return advisor;\r\n    }\r\n```\r\n## 3ã€é…ç½®è¯·æ±‚æƒé™ç \r\né€šè¿‡æ³¨è§£é…ç½®æƒé™ä¿¡æ¯ï¼Œ@RequiresRolesã€@RequiresPermissions ä»¥@RequiresPermissionsä¸ºä¾‹ï¼š\r\n```Java\r\n    @RequiresPermissions(\"item:search\")\r\n    @GetMapping(\"/search\")\r\n    public ResultVo<String> search(){\r\n        return ResultVo.success(\"search\");\r\n    }\r\n    @RequiresPermissions(\"item:add\")\r\n    @GetMapping(\"/add\")\r\n    public ResultVo<String> add(){\r\n        return ResultVo.success(\"add\");\r\n    }\r\n    @RequiresPermissions(\"item:update\")\r\n    @GetMapping(\"/update\")\r\n    public ResultVo<String> update(){\r\n        return ResultVo.success(\"update\");\r\n    }\r\n    @RequiresPermissions(\"item:delete\")\r\n    @GetMapping(\"/delete\")\r\n    public ResultVo<String> delete(){\r\n        return ResultVo.success(\"delete\");\r\n    }\r\n```\r\n## 4ã€æ¼”ç¤ºæ•ˆæœ\r\nç”¨æˆ·ç™»é™†ï¼š\r\n![ç™»é™†ç”¨æˆ·](https://bofengsun.github.io//post-images/1573745823357.png)\r\næœ‰æƒé™ï¼š\r\n![æœ‰æƒé™](https://bofengsun.github.io//post-images/1573745976892.png)\r\næ— æƒé™ï¼š\r\n![æ— æƒé™](https://bofengsun.github.io//post-images/1573746081151.png)",
      "data": {
        "title": "Shiro æƒé™è®¤è¯",
        "date": "2019-11-13 12:39:28",
        "tags": [
          "Shiro"
        ],
        "published": true,
        "hideInList": false,
        "feature": "/post-images/shiro-quan-xian-ren-zheng.png"
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "å‰é¢å‡ ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬æåˆ°Shiroçš„å‡ ä¸ªä¸»è¦åŠŸèƒ½ä¸­ï¼Œå…¶ä¸­è¿˜åŒ…æ‹¬äº†æƒé™è®¤è¯ï¼Œé‚£ä¹ˆè¿™ä¸€èŠ‚ æˆ‘ä»¬å°±ç®€å•ä½“éªŒä¸€ä¸‹Shiroçš„æƒé™è®¤è¯å§ã€‚\r",
      "fileName": "shiro-quan-xian-ren-zheng"
    },
    {
      "content": "Jmeter æ˜¯ä¸€æ¬¾æµ‹è¯•å·¥å…·ï¼Œä¸»è¦ç”¨æ¥è¿›è¡Œå‹åŠ›æµ‹è¯•ï¼Œä»Šå¤©å’Œæµ‹è¯•çš„åŒäº‹åœ¨èŠè¿™ä¸ªè¯é¢˜ï¼Œé¡ºä¾¿å°±ä½“éªŒäº†ä¸€ä¸‹Jmeterè¿›è¡Œå‹åŠ›æµ‹è¯•ï¼Œä¸‹é¢æˆ‘å°±ç®€å•æè¿°ä¸€ä¸‹ä»Šå¤©çš„ä½“éªŒå§ã€‚\r\n<!-- more -->\r\n## Jmeter ä»‹ç»\r\nApache JMeter æ˜¯ä¸€æ¬¾å¼€æºçš„Javaå¼€å‘çš„ç”¨äºè¿›è¡Œè½¯ä»¶æ€§èƒ½æµ‹è¯•çš„è½¯ä»¶ã€‚\r\n## å®‰è£…å’Œè¿è¡Œ\r\nä¸‹è½½åœ°å€ï¼šhttp://mirrors.tuna.tsinghua.edu.cn/apache//jmeter/binaries/apache-jmeter-5.2.zip\r\nè¿è¡Œï¼šwindowsç¯å¢ƒï¼š â€œbin/jmeter.batâ€   linuxç¯å¢ƒï¼š â€œbin/jmeter.shâ€   \r\nåˆ‡æ¢è¯­è¨€ï¼š å¯åŠ¨Jmeter åï¼Œ ç‚¹å‡» Options -> Choose Language -> Chinese[Simplified]  æ¥é€‰æ‹©ç®€ä½“ä¸­æ–‡\r\næˆªå›¾å¦‚ä¸‹ï¼š\r\n![Jmeter](https://bofengsun.github.io//post-images/1573559262706.png)\r\n## æ¡ˆä¾‹\r\n### æ·»åŠ é»˜è®¤è®¾ç½®\r\n1ã€æ·»åŠ  HTTP Cookieç®¡ç†å™¨\r\n![HTTP Cookieç®¡ç†å™¨](https://bofengsun.github.io//post-images/1573563560952.png)\r\n2ã€æ·»åŠ  é»˜è®¤è¯·æ±‚å¤´\r\n![é»˜è®¤è¯·æ±‚å¤´](https://bofengsun.github.io//post-images/1573563633762.png)\r\n3ã€æ·»åŠ  é»˜è®¤è¯·æ±‚\r\n![é»˜è®¤è¯·æ±‚](https://bofengsun.github.io//post-images/1573563677239.png)\r\n### æ·»åŠ çº¿ç¨‹ç»„\r\nå‚æ•°è¯´æ˜ï¼š\r\n    çº¿ç¨‹æ•°ï¼šè¡¨ç¤ºéœ€è¦å¯åŠ¨çš„çº¿ç¨‹æ•°é‡\r\n    Ramp-Upæ—¶é—´ï¼šå¤šå°‘ç§’å†…å¯åŠ¨è¿™äº›çº¿ç¨‹ï¼Œä¹Ÿå°±æ˜¯è¯´ä¼šåœ¨è¿™ä¸ªæ—¶é—´å†…å¯åŠ¨è¿™ä¹ˆå¤šçº¿ç¨‹ï¼Œå¦‚æœè®¾ç½®ä¸º0ï¼Œåˆ™è¡¨ç¤ºåŒæ—¶å¯åŠ¨\r\n    å¾ªç¯æ¬¡æ•°ï¼šè¡¨ç¤ºé‡å¤è¿è¡Œå¤šå°‘æ¬¡ï¼Œæ°¸è¿œè¡¨ç¤ºä¸€ç›´é‡å¤ç›´åˆ°æ—¶é—´ç»“æŸ\r\n    è°ƒåº¦å™¨é…ç½®ï¼šåœ¨é…ç½®è°ƒåº¦å™¨æ—¶ç”Ÿæ•ˆï¼ŒæŒç»­æ—¶é—´ï¼šå°±æ˜¯æ‰§è¡Œå¤šä¹…\r\n![æ·»åŠ çº¿ç¨‹ç»„](https://bofengsun.github.io//post-images/1573563731549.png)\r\n### æ·»åŠ å®šæ—¶å™¨\r\n![æ·»åŠ å®šæ—¶å™¨](https://bofengsun.github.io//post-images/1573609185253.png)\r\n### æ·»åŠ äº‹åŠ¡æ§åˆ¶å™¨\r\n![äº‹åŠ¡æ§åˆ¶å™¨](https://bofengsun.github.io//post-images/1573563817861.png)\r\n### æ·»åŠ è¯·æ±‚\r\n![æ·»åŠ è¯·æ±‚](https://bofengsun.github.io//post-images/1573609251077.png)\r\n### æ·»åŠ æ–­è¨€\r\n![æ·»åŠ æ–­è¨€](https://bofengsun.github.io//post-images/1573609303540.png)\r\n### æ·»åŠ æŸ¥çœ‹ç»“æœæ ‘\r\n![æ·»åŠ æŸ¥çœ‹ç»“æœæ ‘](https://bofengsun.github.io//post-images/1573609390929.png)\r\n### æ·»åŠ èšåˆæŠ¥å‘Š\r\n![æ·»åŠ èšåˆæŠ¥å‘Š](https://bofengsun.github.io//post-images/1573609486454.png)\r\n",
      "data": {
        "title": "Jmeter ä½“éªŒä¹‹æ—…",
        "date": "2019-11-12 19:23:40",
        "tags": [
          "Jmeter"
        ],
        "published": true,
        "hideInList": false,
        "feature": "/post-images/jmeter-ti-yan-zhi-lu.png"
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "Jmeter æ˜¯ä¸€æ¬¾æµ‹è¯•å·¥å…·ï¼Œä¸»è¦ç”¨æ¥è¿›è¡Œå‹åŠ›æµ‹è¯•ï¼Œä»Šå¤©å’Œæµ‹è¯•çš„åŒäº‹åœ¨èŠè¿™ä¸ªè¯é¢˜ï¼Œé¡ºä¾¿å°±ä½“éªŒäº†ä¸€ä¸‹Jmeterè¿›è¡Œå‹åŠ›æµ‹è¯•ï¼Œä¸‹é¢æˆ‘å°±ç®€å•æè¿°ä¸€ä¸‹ä»Šå¤©çš„ä½“éªŒå§ã€‚\r",
      "fileName": "jmeter-ti-yan-zhi-lu"
    },
    {
      "content": "ä¸Šä¸€èŠ‚æˆ‘ä»¬ç®€å•ä»‹ç»äº†ä¸€ä¸‹Shiroçš„èº«ä»½è®¤è¯ï¼Œä½†å…¶ä¸­æœ‰äº›ç»†èŠ‚ä¹‹å¤„æˆ‘ä»¬æ²¡ç”¨è®¨è®ºåˆ°ï¼Œé‚£ä¹ˆè¿™ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°±ä¸€äº›é—®é¢˜è¿›è¡Œä¸€ä¸‹æ€è€ƒè®¨è®ºã€‚\r\n<!-- more -->\r\n## ä¸€ã€å¦‚ä½•å’Œæ”¯æŒWEBã€APPã€ä»¥åŠå…¶ä»–æ–¹å¼è¿›è¡Œèº«ä»½è®¤è¯ï¼Ÿ\r\nå…ˆå›é¡¾ä¸€ä¸‹ä¸Šä¸€èŠ‚æˆ‘ä»¬çš„ç™»é™†éƒ¨åˆ†ä»£ç ï¼š\r\n```Java\r\n/**\r\n * è®¤è¯æ§åˆ¶å™¨\r\n */\r\n@RestController\r\n@RequestMapping(\"/auth\")\r\n@Slf4j\r\npublic class AuthController {\r\n\r\n    /**\r\n     * ç™»é™†\r\n     * @param username ç”¨æˆ·å\r\n     * @param password å¯†ç \r\n     * @return ç™»é™†ç»“æœ\r\n     */\r\n    @PostMapping(\"/login\")\r\n    public ResultVo<String> login(@RequestParam(\"username\") String username,@RequestParam(\"password\") String password){\r\n        Subject currentUser = SecurityUtils.getSubject();\r\n        if (!currentUser.isAuthenticated()) {\r\n            UsernamePasswordToken token = new UsernamePasswordToken(username, password);\r\n            try {\r\n                currentUser.login(token);\r\n                return ResultVo.success(currentUser.getSession().getId().toString());\r\n            }catch (LockedAccountException lae) {\r\n                return ResultVo.failure(Result.LOGIN_FAILURE_LOCK);\r\n            }\r\n            catch (AuthenticationException ae) {\r\n                return ResultVo.failure(Result.LOGIN_FAILURE);\r\n            }\r\n        }else {\r\n            return ResultVo.failure(Result.LOGIN_FAILURE_RELOGIN);\r\n        }\r\n    }\r\n}\r\n```\r\nå¯ä»¥çœ‹åˆ°æˆ‘ä»¬åœ¨ç™»é™†æˆåŠŸåï¼ŒæŠŠç”¨æˆ·çš„SessionIdè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œä½†åœ¨ä¼ ç»ŸWEBå…¶å®æ˜¯ä¸éœ€è¦çš„ï¼Œå› ä¸ºåœ¨è®¤è¯æˆåŠŸåä¼šå°†SessionIdä¿å­˜åœ¨cookieé‡ŒJSESSIONIDï¼Œé‚£ä¹ˆå¦‚æœæˆ‘ä»¬éœ€è¦å…¼å®¹APPæˆ–è€…å…¶ä»–æ–¹å¼è¿™æ ·å°±è¡Œä¸é€šï¼Œä¸€ç§æ¯”è¾ƒç®€å•çš„æ–¹å¼å°±æ˜¯æˆ‘ä»¬æŠŠSessionIdè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯ä¿å­˜ä¸€ä»½ï¼Œæ¯æ¬¡è¯·æ±‚æ—¶ï¼Œå°†å…¶ä½œä¸ºè¯·æ±‚å¤´è¯·æ±‚æœåŠ¡ç«¯ï¼ŒåŒæ—¶æœåŠ¡ç«¯ä¹Ÿè¦æ”¹å˜è·å–SessionIdçš„æ–¹å¼ï¼Œä¸æ˜¯ä»cookieé‡Œè·å–ï¼Œè€Œæ˜¯ä»headeré‡Œè·å–ï¼Œè¿™æ ·å°±å¯ä»¥è§£å†³è¯¥é—®é¢˜ï¼Œé‚£ä¹ˆä¸‹é¢æˆ‘ä»¬å°±çœ‹ä¸€ä¸‹åœ¨Shiroä¸­è¯¥å¦‚ä½•åšå§ã€‚\r\n1ã€è‡ªå®šä¹‰SessionManagerç»§æ‰¿DefaultWebSessionManager\r\n```Java\r\n/**\r\n * è‡ªå®šä¹‰SessionManager\r\n */\r\n@Slf4j\r\npublic class CustomWebSessionManager extends DefaultWebSessionManager{\r\n\r\n    private static final String JSESSIONID=\"JSESSIONID\";\r\n\r\n    @Override\r\n    public Serializable getSessionId(SessionKey key) {\r\n        Serializable id = super.getSessionId(key);\r\n        //å¦‚æœä»Cookieä¸­æ²¡æœ‰è·å–åˆ°SessionId,åˆ™ä»è¯·æ±‚å¤´ä¸­è·å–\r\n        if (id == null) {\r\n            HttpServletRequest request = (HttpServletRequest)WebUtils.getRequest(key);\r\n            id = request.getHeader(JSESSIONID);\r\n        }\r\n        return id;\r\n    }\r\n}\r\n```\r\n2ã€å°†è‡ªå®šä¹‰çš„SessionManageræ”¾å…¥å®¹å™¨ä¸­\r\n3ã€è®¾ç½®SecurityManagerçš„SessionManagerä¸ºè‡ªå®šä¹‰çš„SessionManager\r\n```Java\r\n/**\r\n * Shiro é…ç½®\r\n */\r\n@Configuration\r\npublic class ShiroConfig {\r\n\r\n    /**\r\n     * é…ç½®ShiroFilter\r\n     * @param securityManager æ³¨å…¥SecurityManager\r\n     * @return ShiroFilterFactoryBean\r\n     */\r\n    @Bean(name = \"shiroFilter\")\r\n    public ShiroFilterFactoryBean shiroFilter(SecurityManager securityManager) {\r\n        ShiroFilterFactoryBean shiroFilterFactoryBean = new ShiroFilterFactoryBean();\r\n        shiroFilterFactoryBean.setSecurityManager(securityManager);\r\n        Map<String, String> filterChainDefinitionMap = new LinkedHashMap<>();\r\n        filterChainDefinitionMap.put(\"/auth/login\", \"anon\");\r\n        filterChainDefinitionMap.put(\"/openapi/**\", \"anon\");\r\n        filterChainDefinitionMap.put(\"/**\", \"authc\");\r\n        shiroFilterFactoryBean.setFilterChainDefinitionMap(filterChainDefinitionMap);\r\n        return shiroFilterFactoryBean;\r\n    }\r\n\r\n    /**\r\n     * é…ç½®SecurityManager\r\n     * @param customRealm æ³¨å…¥è‡ªå®šä¹‰Realm\r\n     * @return SecurityManager\r\n     */\r\n    @Bean\r\n    public SecurityManager securityManager(CustomRealm customRealm, SessionManager sessionManager) {\r\n        DefaultWebSecurityManager defaultSecurityManager = new DefaultWebSecurityManager();\r\n        defaultSecurityManager.setSessionManager(sessionManager);\r\n        defaultSecurityManager.setRealm(customRealm);\r\n        return defaultSecurityManager;\r\n    }\r\n\r\n    /**\r\n     * é…ç½®è‡ªå®šä¹‰SessionManager\r\n     * @return\r\n     */\r\n    @Bean(\"sessionManager\")\r\n    public CustomWebSessionManager customWebSessionManager(){\r\n        return new CustomWebSessionManager();\r\n    }\r\n\r\n    /**\r\n     * é…ç½®è‡ªå®šä¹‰çš„Realm\r\n     * @return CustomRealm\r\n     */\r\n    @Bean\r\n    public CustomRealm customRealm() {\r\n        CustomRealm customRealm = new CustomRealm();\r\n        return customRealm;\r\n    }\r\n}\r\n```\r\n4ã€å®¢æˆ·ç«¯ç™»é™†æˆåŠŸåå°†sessionIdä¿å­˜èµ·æ¥ï¼Œæ¯æ¬¡è¯·æ±‚çš„æ—¶å€™å¸¦ä¸Šè¯¥è¯·æ±‚å¤´\r\n## äºŒã€åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œå¦‚ä½•æ¥ç»´æŠ¤Sessionçš„å‘¢ï¼Ÿ\r\né‚£ä¹ˆè¿™é‡Œå°±æ˜¯å¦‚ä½•ç»Ÿä¸€ç»´æŠ¤Sessionçš„é—®é¢˜äº†ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šå°†Sessionä¿å­˜åœ¨ç¼“å­˜ä¸­é—´ä»¶é‡Œï¼Œä¾‹å¦‚Redisï¼Œè¿™æ ·å³ä¿è¯æ€§èƒ½ï¼Œåˆå®ç°åŠŸèƒ½ï¼Œä¸‹é¢æˆ‘ä»¬å°±ä½“éªŒä¸€ä¸‹å§ï¼Ÿ\r\n1ã€è¿æ¥Redisä»¥åŠç¼–å†™RedisUtilï¼ˆè¯¥éƒ¨åˆ†ä»æ˜¯é‡‡ç”¨MAPè¿›è¡Œå¤„ç†ï¼Œå¾…åé¢å’ŒRedisç»§æ‰¿æ—¶ä¿®æ”¹è¿™é‡Œï¼‰\r\n```Java\r\n/**\r\n * Rediså·¥å…·ç±»\r\n */\r\npublic class RedisUtil {\r\n    static Map<String,Object> SESSION_ID_CACHE=new HashMap<>();\r\n    public static void set(String key,Object value){\r\n        SESSION_ID_CACHE.put(key,value);\r\n    }\r\n    public static Object get(String key){\r\n        return SESSION_ID_CACHE.get(key);\r\n    }\r\n    public static void del(String key){\r\n        SESSION_ID_CACHE.remove(key);\r\n    }\r\n    public static Collection values(){\r\n        return SESSION_ID_CACHE.values();\r\n    }\r\n}\r\n```\r\n2ã€ç¼–å†™è‡ªå®šä¹‰SessionDao ç»§æ‰¿EnterpriseCacheSessionDAO é‡å†™è¯»å–Sessionçš„æ–¹æ³•\r\n```Java\r\n/**\r\n * è‡ªå®šä¹‰SessionDAOä»Redisä¸­è¯»å–Session\r\n */\r\npublic class CustomSessionDAO extends EnterpriseCacheSessionDAO {\r\n    @Override\r\n    protected Session doReadSession(Serializable serializable) {\r\n        return (Session) RedisUtil.get(serializable.toString());\r\n    }\r\n}\r\n```\r\n3ã€ç¼–å†™è‡ªå®šä¹‰SerssionListener ç»´æŠ¤Sessionä¸­çš„å€¼\r\n```Java\r\n/**\r\n * è‡ªå®šä¹‰SerssionListener ç»´æŠ¤Sessionä¸­çš„å€¼\r\n */\r\npublic class CustomSessionListener implements SessionListener {\r\n    @Override\r\n    public void onStart(Session session) {\r\n        RedisUtil.set(session.getId().toString(),session);\r\n    }\r\n\r\n    @Override\r\n    public void onStop(Session session) {\r\n        RedisUtil.del(session.getId().toString());\r\n    }\r\n\r\n    @Override\r\n    public void onExpiration(Session session) {\r\n        RedisUtil.del(session.getId().toString());\r\n    }\r\n}\r\n\r\n```\r\n3ã€å°†CustomSessionDAOã€CustomSerssionListeneråŠ å…¥Shiroé…ç½®ä¸­\r\n```Java\r\n/**\r\n * Shiro é…ç½®\r\n */\r\n@Configuration\r\npublic class ShiroConfig {\r\n\r\n    /**\r\n     * é…ç½®ShiroFilter\r\n     * @param securityManager æ³¨å…¥SecurityManager\r\n     * @return ShiroFilterFactoryBean\r\n     */\r\n    @Bean(name = \"shiroFilter\")\r\n    public ShiroFilterFactoryBean shiroFilter(SecurityManager securityManager) {\r\n        ShiroFilterFactoryBean shiroFilterFactoryBean = new ShiroFilterFactoryBean();\r\n        shiroFilterFactoryBean.setSecurityManager(securityManager);\r\n        Map<String, String> filterChainDefinitionMap = new LinkedHashMap<>();\r\n        filterChainDefinitionMap.put(\"/auth/login\", \"anon\");\r\n        filterChainDefinitionMap.put(\"/openapi/**\", \"anon\");\r\n        filterChainDefinitionMap.put(\"/**\", \"authc\");\r\n        shiroFilterFactoryBean.setFilterChainDefinitionMap(filterChainDefinitionMap);\r\n        return shiroFilterFactoryBean;\r\n    }\r\n\r\n    /**\r\n     * é…ç½®SecurityManager\r\n     * @param customRealm æ³¨å…¥è‡ªå®šä¹‰Realm\r\n     * @return SecurityManager\r\n     */\r\n    @Bean\r\n    public SecurityManager securityManager(CustomRealm customRealm, SessionManager sessionManager) {\r\n        DefaultWebSecurityManager defaultSecurityManager = new DefaultWebSecurityManager();\r\n        defaultSecurityManager.setSessionManager(sessionManager);\r\n        defaultSecurityManager.setRealm(customRealm);\r\n        return defaultSecurityManager;\r\n    }\r\n\r\n    /**\r\n     * é…ç½®è‡ªå®šä¹‰SessionManager\r\n     * @return\r\n     */\r\n    @Bean(\"sessionManager\")\r\n    public CustomWebSessionManager customWebSessionManager(SessionDAO sessionDAO){\r\n        CustomWebSessionManager customWebSessionManager=new CustomWebSessionManager();\r\n        customWebSessionManager.setSessionDAO(sessionDAO);\r\n        //é…ç½®è‡ªå®šä¹‰\r\n        List<SessionListener> listeners=new ArrayList<>();\r\n        listeners.add(new CustomSessionListener());\r\n        customWebSessionManager.setSessionListeners(listeners);\r\n        return customWebSessionManager;\r\n    }\r\n\r\n    /**\r\n     * é…ç½®è‡ªå®šä¹‰çš„Realm\r\n     * @return CustomRealm\r\n     */\r\n    @Bean\r\n    public CustomRealm customRealm() {\r\n        CustomRealm customRealm = new CustomRealm();\r\n        return customRealm;\r\n    }\r\n\r\n    /**\r\n     * é…ç½®è‡ªå®šä¹‰SessionDAO\r\n     * @return CustomSessionDAO\r\n     */\r\n    @Bean(\"sessionDAO\")\r\n    public CustomSessionDAO customSessionDao(){\r\n        CustomSessionDAO customSessionDAO=new CustomSessionDAO();\r\n        customSessionDAO.setSessionIdGenerator(new JavaUuidSessionIdGenerator());\r\n        return customSessionDAO;\r\n    }\r\n}\r\n```\r\n## ä¸‰ã€åŸºäºTokençš„éªŒè¯æ–¹å¼\r\nç°å¦‚ä»Šï¼Œå¾ˆå¤šWebåº”ç”¨çš„éªŒè¯æ–¹å¼éƒ½ä¼šé‡‡ç”¨åŸºäºtokençš„éªŒè¯æ–¹å¼ï¼Œå®é™…ä¸Šè¿™ç§æ–¹å¼å¾ˆåƒæˆ‘ä»¬ä¸Šé¢æ‰€è¯´çš„å°†SessionIdæ”¾å…¥è¯·æ±‚å¤´ä¸­ï¼Œåªæ˜¯åŸºäºtokençš„è¿™ç§æ–¹å¼ï¼Œtokençš„ä¿å­˜çš„ä¿¡æ¯å¯èƒ½æ›´å…·æœ‰æ„ä¹‰ã€‚é‚£åœ¨Shiroä¸­å¦‚ä½•æ¥å®ç°å‘¢ï¼Ÿ\r\n1ã€ç™»é™†æˆåŠŸæ—¶ï¼Œç”Ÿæˆå¯¹åº”çš„token,å¹¶ä¿å­˜åœ¨redisä¸­\r\n2ã€ç¼–å†™è®¤è¯æœåŠ¡å™¨,ç»§æ‰¿FormAuthenticationFilter,å¹¶é‡å†™onAccessDeniedï¼Œä»è¯·æ±‚å¤´ä¸­è·å–è·å–TOKENï¼Œå¹¶ä»redisä¸­è·å–tokenï¼Œå¯¹æ¯”tokenå³å¯ã€‚\r\n## å››ã€ç»Ÿä¸€è®¤è¯ä¸­å¿ƒ\r\nç»Ÿä¸€è®¤è¯ä¸­å¿ƒä¸»è¦æ˜¯è¿›è¡Œç»Ÿä¸€çš„èº«ä»½è®¤è¯ï¼Œä¸»è¦æ˜¯ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š\r\n1ã€è¯·æ±‚è®¤è¯ä¸­å¿ƒæ—¶ï¼Œéœ€è¦å°†éªŒè¯åéœ€è¦è·³è½¬çš„URLä½œä¸ºè¯·æ±‚å‚æ•°ï¼›\r\n2ã€æœåŠ¡ç«¯ä¿®æ”¹ä¸ºä¸ä»…å¯ä»¥ä»Cookieå’ŒHeaderä¸­è·å–å¯¹åº”çš„tokenæˆ–è€…sessionIdï¼Œè¿˜éœ€è¦å¯ä»¥ä»è¯·æ±‚å‚æ•°é‡Œè·å–åˆ°å¯¹åº”çš„å€¼ï¼›\r\n3ã€æœåŠ¡ç«¯è®¤è¯æˆåŠŸåå°†tokenæˆ–è€…sessionIdä½œä¸ºå‚æ•°é‡å®šå‘åˆ°ç™»é™†è®¤è¯çš„å›è°ƒåœ°å€ã€‚",
      "data": {
        "title": "Shiro èº«ä»½è®¤è¯ï¼ˆç»­ï¼‰",
        "date": "2019-11-11 13:25:45",
        "tags": [
          "Shiro"
        ],
        "published": true,
        "hideInList": false,
        "feature": "/post-images/shiro-authentication-2.png"
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "ä¸Šä¸€èŠ‚æˆ‘ä»¬ç®€å•ä»‹ç»äº†ä¸€ä¸‹Shiroçš„èº«ä»½è®¤è¯ï¼Œä½†å…¶ä¸­æœ‰äº›ç»†èŠ‚ä¹‹å¤„æˆ‘ä»¬æ²¡ç”¨è®¨è®ºåˆ°ï¼Œé‚£ä¹ˆè¿™ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°±ä¸€äº›é—®é¢˜è¿›è¡Œä¸€ä¸‹æ€è€ƒè®¨è®ºã€‚\r",
      "fileName": "shiro-authentication-2"
    },
    {
      "content": "\r\nä¸Šä¸€èŠ‚ ã€Shiro åˆä½“éªŒã€‘ä¸­æˆ‘ä»¬è®¤è¯†äº†å‡ ä¸ªShiroä¸­é‡è¦çš„æ¦‚å¿µï¼Œä»¥åŠä¸€ä¸ªQuickStartä»£ç ç¤ºä¾‹æ¼”ç¤ºäº†Shiroçš„åŸºæœ¬ä½¿ç”¨ï¼Œä¹ŸçŸ¥é“Shiroçš„å‡ ä¸ªä¸»è¦åŠŸèƒ½ï¼Œé¦–å…ˆå°±æ˜¯èº«ä»½è®¤è¯ï¼Œé‚£ä¹ˆä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹ä¸€ä¸‹Shiroæ˜¯å¦‚ä½•è¿›è¡Œèº«ä»½è®¤è¯çš„å§ã€‚\r\n<!-- more -->\r\nåœ¨ä¸Šä¸€èŠ‚ä¸­æˆ‘ä»¬çœ‹åˆ°Shiroçš„ç™»é™†ï¼Œå½“æ—¶çš„ç”¨æˆ·ä¿¡æ¯æ˜¯åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œä½†åœ¨å®é™…é¡¹ç›®ä¸­å¹¶ä¸ä¼šè¿™æ ·ï¼Œè€Œæ˜¯å­˜å‚¨åœ¨æ•°æ®åº“ä¸­é‚£ä¹ˆï¼Œè¿™ç§æƒ…å†µä¸‹Shiroåˆæ˜¯æ€æ ·è¿›è¡Œèº«ä»½è®¤è¯çš„å‘¢ï¼Ÿæˆ‘ä»¬å¯¹ä¸Šä¸€ç« çš„ä»£ç åšä¸€ä¸ªç®€å•çš„ä¿®æ”¹ï¼Œä»¥äº†è§£è®¤è¯çš„è¿‡ç¨‹ï¼š\r\nä¾èµ–åŒ…ï¼š\r\n```XML\r\n<dependencies>\r\n        <dependency>\r\n            <groupId>org.springframework.boot</groupId>\r\n            <artifactId>spring-boot-starter-web</artifactId>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.springframework.boot</groupId>\r\n            <artifactId>spring-boot-starter-test</artifactId>\r\n            <scope>test</scope>\r\n        </dependency>\r\n        <dependency>\r\n            <groupId>org.projectlombok</groupId>\r\n            <artifactId>lombok</artifactId>\r\n            <version>1.18.8</version>\r\n        </dependency>\r\n        <!--æ•´åˆShiro-->\r\n        <dependency>\r\n            <groupId>org.apache.shiro</groupId>\r\n            <artifactId>shiro-spring</artifactId>\r\n            <version>1.4.0</version>\r\n        </dependency>\r\n    </dependencies>\r\n```\r\nå‰ç½®ä»£ç ï¼š\r\n```Java\r\n/**\r\n * ç»Ÿä¸€ç»´æŠ¤è¿”å›çš„æ•°æ®\r\n */\r\npublic enum Result{\r\n    //é»˜è®¤è¿”å›æ•°æ®\r\n    SUCCESS(0,\"è¯·æ±‚æˆåŠŸï¼\"),\r\n    FAILURE(500,\"è¯·æ±‚å¤±è´¥ï¼\"),\r\n    //è®¤è¯æˆæƒéƒ¨åˆ†\r\n    LOGIN_FAILURE(501,\"ç”¨æˆ·åæˆ–è€…å¯†ç é”™è¯¯ï¼\"),\r\n    LOGIN_FAILURE_LOCK(501,\"ç”¨æˆ·è¢«é”å®š,è¯·è”ç³»ç®¡ç†å‘˜ï¼\"),\r\n    LOGIN_FAILURE_RELOGIN(502,\"ç”¨æˆ·å·²ç»ç™»é™†,æ— é¡»å†æ¬¡ç™»é™†ï¼\"),\r\n    AUTH_FAILURE(511,\"æ— æƒé™ï¼\");\r\n\r\n    private Integer code;\r\n    private String msg;\r\n    private Result(Integer code,String msg){\r\n        this.code=code;\r\n        this.msg=msg;\r\n    }\r\n    public Integer getCode() {\r\n        return code;\r\n    }\r\n    public String getMsg() {\r\n        return msg;\r\n    }\r\n}\r\n/**\r\n * ç»Ÿä¸€è¿”å›çš„æ•°æ®ç±»å‹\r\n */\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class ResultVo<T> {\r\n    private Integer code;\r\n    private String msg;\r\n    private T data;\r\n    public static <T> ResultVo<T> success(T data){\r\n        return new ResultVo<>(Result.SUCCESS.getCode(),Result.SUCCESS.getMsg(),data);\r\n    }\r\n    public static<T> ResultVo<T> failure(Result result){\r\n        return new ResultVo<>(result.getCode(),result.getMsg(),null);\r\n    }\r\n}\r\n```\r\nShiroçš„é…ç½®ï¼šRealmã€SecurityManagerã€shiroFilter\r\n- Relam:å®‰å…¨æ•°æ®\r\n- SecurityManagerï¼š Shiro çš„å¤§ç®¡å®¶è´Ÿè´£ç»„ä»¶åè°ƒ\r\n- shiroFilterï¼š Filterå¯¹å“ªäº›è¯·æ±‚è¿›è¡Œæ‹¦æˆª\r\n```Java\r\n/**\r\n * Shiro é…ç½®\r\n */\r\n@Configuration\r\npublic class ShiroConfig {\r\n\r\n    /**\r\n     * é…ç½®ShiroFilter\r\n     * @param securityManager æ³¨å…¥SecurityManager\r\n     * @return ShiroFilterFactoryBean\r\n     */\r\n    @Bean(name = \"shiroFilter\")\r\n    public ShiroFilterFactoryBean shiroFilter(SecurityManager securityManager) {\r\n        ShiroFilterFactoryBean shiroFilterFactoryBean = new ShiroFilterFactoryBean();\r\n        shiroFilterFactoryBean.setSecurityManager(securityManager);\r\n        Map<String, String> filterChainDefinitionMap = new LinkedHashMap<>();\r\n        filterChainDefinitionMap.put(\"/auth/login\", \"anon\");\r\n        filterChainDefinitionMap.put(\"/**\", \"authc\");\r\n        shiroFilterFactoryBean.setFilterChainDefinitionMap(filterChainDefinitionMap);\r\n        return shiroFilterFactoryBean;\r\n    }\r\n\r\n    /**\r\n     * é…ç½®SecurityManager\r\n     * @param customRealm æ³¨å…¥è‡ªå®šä¹‰Realm\r\n     * @return SecurityManager\r\n     */\r\n    @Bean\r\n    public SecurityManager securityManager(CustomRealm customRealm) {\r\n        DefaultWebSecurityManager defaultSecurityManager = new DefaultWebSecurityManager();\r\n        defaultSecurityManager.setRealm(customRealm);\r\n        return defaultSecurityManager;\r\n    }\r\n\r\n    /**\r\n     * é…ç½®è‡ªå®šä¹‰çš„Realm\r\n     * @return CustomRealm\r\n     */\r\n    @Bean\r\n    public CustomRealm customRealm() {\r\n        CustomRealm customRealm = new CustomRealm();\r\n        return customRealm;\r\n    }\r\n}\r\n```\r\n\r\nç™»é™†è®¤è¯éƒ¨åˆ†çš„ä»£ç ï¼š\r\n```Java\r\n/**\r\n * è®¤è¯æ§åˆ¶å™¨\r\n */\r\n@RestController\r\n@RequestMapping(\"/auth\")\r\n@Slf4j\r\npublic class AuthController {\r\n\r\n    /**\r\n     * ç™»é™†\r\n     * @param username ç”¨æˆ·å\r\n     * @param password å¯†ç \r\n     * @return ç™»é™†ç»“æœ\r\n     */\r\n    @PostMapping(\"/login\")\r\n    public ResultVo<String> login(@RequestParam(\"username\") String username,@RequestParam(\"password\") String password){\r\n        Subject currentUser = SecurityUtils.getSubject();\r\n        if (!currentUser.isAuthenticated()) {\r\n            UsernamePasswordToken token = new UsernamePasswordToken(username, password);\r\n            try {\r\n                currentUser.login(token);\r\n                return ResultVo.success(currentUser.getSession().getId().toString());\r\n            }catch (LockedAccountException lae) {\r\n                return ResultVo.failure(Result.LOGIN_FAILURE_LOCK);\r\n            }\r\n            catch (AuthenticationException ae) {\r\n                return ResultVo.failure(Result.LOGIN_FAILURE);\r\n            }\r\n        }else {\r\n            return ResultVo.failure(Result.LOGIN_FAILURE_RELOGIN);\r\n        }\r\n    }\r\n}\r\n```\r\næµç¨‹åˆ†æï¼š\r\n1ã€å…ˆé€šè¿‡SecurityUtils#getSubject()è·å–å½“å‰ç”¨æˆ·\r\n2ã€Subject#isAuthenticated()è°ƒç”¨åˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦ç™»é™†\r\n3ã€è‹¥æ²¡ç”¨è¿›è¡Œç™»é™†è®¤è¯ï¼Œåˆ™å°†ç”¨æˆ·çš„usernameå’Œpasswordä¸ºå°è£…UsernamePasswordToken\r\n4ã€è°ƒç”¨Subject#login(token)è¿›è¡Œç™»é™†\r\n5ã€é€šè¿‡è‡ªå®šä¹‰Realmè¿›è¡Œèº«ä»½è®¤è¯ï¼Œè‡ªå®šä¹‰Realmå¦‚æœåªæ˜¯ç”¨æ¥è¿›è¡Œèº«ä»½è®¤è¯åˆ™åªéœ€ç»§æ‰¿org.apache.shiro.realm.AuthenticatingRealmå³å¯ï¼Œå¦‚æœè¿˜éœ€è¦è¿›è¡Œé‰´æƒï¼Œåˆ™éœ€è¦ç»§æ‰¿org.apache.shiro.realm.AuthorizingRealm,è¿™é‡Œæˆ‘ä»¬å°±å…ˆç»§æ‰¿AuthenticatingRealmã€‚\r\næŸ¥çœ‹Realmçš„å‰ç½®ä»£ç ï¼š\r\n```Java\r\n/**\r\n * ç”¨æˆ·å®ä½“ä¿¡æ¯\r\n */\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Builder\r\npublic class User {\r\n\r\n    /**\r\n     * é€»è¾‘ID\r\n     */\r\n    private String id;\r\n    /**\r\n     * ç”¨æˆ·å(å”¯ä¸€)\r\n     */\r\n    private String username;\r\n    /**\r\n     * å¯†ç \r\n     */\r\n    private String password;\r\n    /**\r\n     * çŠ¶æ€æ˜¯å¦é”å®š:1 æ˜¯ï¼›0å¦\r\n     */\r\n    private Integer status;\r\n}\r\n/**\r\n * ç”¨æˆ·æœåŠ¡\r\n */\r\npublic interface UserService {\r\n    /**\r\n     * æ ¹æ®ç”¨æˆ·åè·å–ç”¨æˆ·\r\n     * @param username ç”¨æˆ·å\r\n     * @return User\r\n     */\r\n    User getByUsername(String username);\r\n}\r\n@Service\r\npublic class UserServiceImpl implements UserService {\r\n    /**\r\n     * åˆå§‹åŒ–ç”¨æˆ·æ•°æ®æº\r\n     */\r\n    static final Map<String,User> USERS = new HashMap<>();\r\n    static {\r\n        USERS.put(\"admin\",User.builder()\r\n                .id(\"1\")\r\n                .username(\"admin\")\r\n                .password(\"123456\")\r\n                .status(0)\r\n                .build());\r\n        USERS.put(\"guest\",User.builder()\r\n                .id(\"2\")\r\n                .username(\"guest\")\r\n                .password(\"123456\")\r\n                .status(0)\r\n                .build());\r\n        USERS.put(\"lockeduser\",User.builder()\r\n                .id(\"2\")\r\n                .username(\"lockeduser\")\r\n                .password(\"123456\")\r\n                .status(1)\r\n                .build());\r\n    }\r\n\r\n    @Override\r\n    public User getByUsername(String username) {\r\n        return USERS.get(username);\r\n    }\r\n}\r\n/**\r\n * å¸¸é‡ç±»\r\n */\r\npublic interface Constant {\r\n    /**\r\n     * ç”¨æˆ·è¢«é”å®šçŠ¶æ€\r\n     */\r\n    Integer USER_LOCKED=1;\r\n}\r\n/**\r\n * è‡ªå®šä¹‰Realm\r\n */\r\n@Slf4j\r\npublic class CustomRealm extends AuthenticatingRealm {\r\n\r\n    @Autowired\r\n    private UserService userService;\r\n\r\n    /**\r\n     * å®ç°è¯¥æ–¹æ³•è¿›è¡Œè®¤è¯ï¼Œåœ¨è°ƒç”¨Subject#loginçš„æ—¶å€™ä¼šè¿›å…¥è¯¥æ–¹æ³•\r\n     * @param authenticationToken ä»¤ç‰Œ\r\n     * @return è®¤è¯çš„ä¿¡æ¯\r\n     * @throws AuthenticationException è®¤è¯å¼‚å¸¸\r\n     */\r\n    @Override\r\n    protected AuthenticationInfo doGetAuthenticationInfo(AuthenticationToken authenticationToken) throws AuthenticationException {\r\n        log.info(\"å¼€å§‹è¿›è¡Œèº«ä»½è®¤è¯ï¼\");\r\n        UsernamePasswordToken usernamePasswordToken=(UsernamePasswordToken)authenticationToken;\r\n        String username = usernamePasswordToken.getUsername();\r\n        User user = userService.getByUsername(username);\r\n        if(user==null){\r\n            log.info(\"ç”¨æˆ·æœªæ‰¾åˆ°ï¼\");\r\n            throw new UnknownAccountException(Result.LOGIN_FAILURE.getMsg());\r\n        }else if (Constant.USER_LOCKED.equals(user.getStatus())){\r\n            log.info(\"ç”¨æˆ·è¢«é”å®šï¼\");\r\n            throw new LockedAccountException(Result.LOGIN_FAILURE_LOCK.getMsg());\r\n        }else {\r\n            String principal=username;\r\n            String credentials=user.getPassword();\r\n            String realmName=getName();\r\n            SimpleAuthenticationInfo simpleAuthenticationInfo=new SimpleAuthenticationInfo(principal,credentials,realmName);\r\n            log.info(\"è®¤è¯æˆåŠŸï¼\");\r\n            return simpleAuthenticationInfo;\r\n        }\r\n    }\r\n}\r\n```\r\n",
      "data": {
        "title": "Shiro èº«ä»½è®¤è¯",
        "date": "2019-11-10 18:57:42",
        "tags": [
          "Shiro"
        ],
        "published": true,
        "hideInList": false,
        "feature": "/post-images/shiro-authentication.png"
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "\r\nä¸Šä¸€èŠ‚ ã€Shiro åˆä½“éªŒã€‘ä¸­æˆ‘ä»¬è®¤è¯†äº†å‡ ä¸ªShiroä¸­é‡è¦çš„æ¦‚å¿µï¼Œä»¥åŠä¸€ä¸ªQuickStartä»£ç ç¤ºä¾‹æ¼”ç¤ºäº†Shiroçš„åŸºæœ¬ä½¿ç”¨ï¼Œä¹ŸçŸ¥é“Shiroçš„å‡ ä¸ªä¸»è¦åŠŸèƒ½ï¼Œé¦–å…ˆå°±æ˜¯èº«ä»½è®¤è¯ï¼Œé‚£ä¹ˆä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹ä¸€ä¸‹Shiroæ˜¯å¦‚ä½•è¿›è¡Œèº«ä»½è®¤è¯çš„å§ã€‚\r",
      "fileName": "shiro-authentication"
    },
    {
      "content": "Shiro æ˜¯ä¸€ä¸ªJavaå®‰å…¨æ¡†æ¶ï¼Œä¸»è¦æ˜¯è¿›è¡Œèº«ä»½è®¤è¯ï¼Œæƒé™è®¤è¯ï¼Œå¯†ç åŠ å¯†ï¼Œä¼šè¯ç®¡ç†çš„ä¸€å¥—æ¡†æ¶ï¼Œä¸‹é¢è®©æˆ‘ä»¬ä¸€èµ·æ¥è®¤è¯†ä¸€ä¸‹Shiroå§!\r\n<!-- more -->\r\n## 1ã€è®¤è¯†Shiroçš„åŠŸèƒ½\r\nçœ‹å›¾è¯´è¯ï¼Œä¸‹å›¾ä¸­æ˜¯Shiroå®˜ç½‘ç»™å‡ºçš„æè¿°ï¼Œå¾ˆæ˜æ˜¾ä¸»è¦åŒ…æ‹¬å››ç‚¹ï¼š\r\n- Authentication(èº«ä»½è®¤è¯)\r\n- Authorization(æƒé™è®¤è¯)\r\n- Session Management(ä¼šè¯ç®¡ç†)\r\n- Cryptography(å¯†ç å­¦)\r\n![ShiroåŠŸèƒ½](https://bofengsun.github.io//post-images/1573123546063.png)\r\n\r\n## 2ã€å…³é”®æ¦‚å¿µè®¤è¯†\r\n- Subject (org.apache.shiro.subject.Subject) ä¸»ä½“\r\n  æŒ‡æ­£åœ¨è®¿é—®çš„ä¸»ä½“ï¼Œé€šå¸¸æŒ‡å½“å‰ç”¨æˆ·ï¼Œäº¦å¯æŒ‡çˆ¬è™«ã€å®šæ—¶ä»»åŠ¡ç­‰ã€‚\r\n- SecurityManager (org.apache.shiro.mgt.SecurityManager) å®‰å…¨ç®¡ç†å™¨\r\n  å®‰å…¨ç®¡ç†å™¨ï¼Œæ˜¯Shiroçš„æ ¸å¿ƒï¼Œç®¡ç†ç€æ‰€æœ‰çš„Subjectï¼Œè´Ÿè´£ä¸Shiroçš„å…¶ä»–ç»„ä»¶è¿›è¡Œäº¤äº’ï¼Œç±»ä¼¼ä¸SpringMvc ä¸­çš„DispatcherServletã€‚\r\n- Realms å®‰å…¨æ•°æ®\r\n  ä¸»è¦æ˜¯å‚¨å­˜Shiroçš„å®‰å…¨æ•°æ®ï¼ˆç”¨æˆ·ã€è§’è‰²ã€æƒé™ç­‰ï¼‰ï¼ŒSecurityManageréªŒè¯ç”¨æˆ·æ˜¯å¦ç™»é™†ã€æ˜¯å¦æ‹¥æœ‰æƒé™ç­‰éœ€è¦ä»å…¶ä¸­è·å–æ•°æ®ã€‚\r\n![](https://bofengsun.github.io//post-images/1573126718187.png)\r\n## 3ã€åˆä½“éªŒ\r\n```Java\r\n//git clone https://github.com/apache/shiro.git ä¸‹è½½Shiroæºç åŒ…æ‹¬è¯¥ä»£ç ã€‚\r\n\r\npublic class Quickstart {\r\n\r\n    private static final transient Logger log = LoggerFactory.getLogger(Quickstart.class);\r\n\r\n\r\n    public static void main(String[] args) {\r\n\r\n        //ç”¨æ¥ä»é…ç½®æ–‡ä»¶åˆå§‹åŒ–Shiroç¯å¢ƒï¼Œä¸€èˆ¬ä¸ä¼šç”¨\r\n        Factory<SecurityManager> factory = new IniSecurityManagerFactory(\"classpath:shiro.ini\");\r\n        SecurityManager securityManager = factory.getInstance();\r\n        SecurityUtils.setSecurityManager(securityManager);\r\n        //è·å–å½“å‰ç”¨æˆ·,ä»è¿™ä»¥åçš„ä»£ç éƒ½æ¯”è¾ƒé‡è¦\r\n        Subject currentUser = SecurityUtils.getSubject();\r\n        //è·å–Session\r\n        Session session = currentUser.getSession();\r\n        session.setAttribute(\"someKey\", \"aValue\");\r\n        String value = (String) session.getAttribute(\"someKey\");\r\n        if (value.equals(\"aValue\")) {\r\n            log.info(\"Retrieved the correct value! [\" + value + \"]\");\r\n        }\r\n\r\n        // åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç»è¿‡èº«ä»½è®¤è¯ï¼Œå¦‚æœæ²¡ç”¨åˆ™è¿›è¡Œèº«ä»½è®¤è¯\r\n        if (!currentUser.isAuthenticated()) {\r\n            //é€šè¿‡ç”¨æˆ·åå¯†ç è¿›è¡Œç™»é™†\r\n            UsernamePasswordToken token = new UsernamePasswordToken(\"lonestarr\", \"vespa\");   //è®¾ç½®è®°ä½æˆ‘\r\n            token.setRememberMe(true);\r\n            try {\r\n                //è¿›è¡Œç™»é™†\r\n                currentUser.login(token);\r\n            } catch (UnknownAccountException uae) {//ç”¨æˆ·ä¸å­˜åœ¨å¼‚å¸¸\r\n                log.info(\"There is no user with username of \" + token.getPrincipal());\r\n            } catch (IncorrectCredentialsException ice) {//å¯†ç ä¸æ­£ç¡®å¼‚å¸¸\r\n                log.info(\"Password for account \" + token.getPrincipal() + \" was incorrect!\");\r\n            } catch (LockedAccountException lae) {//ç”¨æˆ·è¢«é”å®šå¼‚å¸¸\r\n                log.info(\"The account for username \" + token.getPrincipal() + \" is locked.  \" +\r\n                        \"Please contact your administrator to unlock it.\");\r\n            }\r\n            // ... catch more exceptions here (maybe custom ones specific to your application?\r\n            catch (AuthenticationException ae) {//è®¤è¯å¼‚å¸¸ï¼ŒæŸ¥çœ‹å…¶å­ç±»å‘ç°Shiroæä¾›çš„è®¤è¯å¼‚å¸¸\r\n                //unexpected condition?  error?\r\n            }\r\n        }\r\n\r\n        log.info(\"User [\" + currentUser.getPrincipal() + \"] logged in successfully.\");\r\n\r\n        // åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰è§’è‰²\r\n        if (currentUser.hasRole(\"schwartz\")) {\r\n            log.info(\"May the Schwartz be with you!\");\r\n        } else {\r\n            log.info(\"Hello, mere mortal.\");\r\n        }\r\n\r\n        //åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰æƒé™\r\n        //åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰winnebago:drive:eagle5æƒé™\r\n        //winnebago ç±»å‹ï¼Œdriver è¡Œä¸ºï¼Œeagle5å¯¹è±¡\r\n        //å¦‚ å½“å‰ç”¨æˆ·æ‹¥æœ‰å¯¹å¼ ä¸‰ï¼ˆå¯¹è±¡ï¼‰è¿™ä¸ªç”¨æˆ·ï¼ˆç±»å‹ï¼‰çš„åˆ é™¤è¡Œä¸º\r\n        if (currentUser.isPermitted(\"winnebago:drive:eagle5\")) {\r\n            log.info(\"You are permitted to 'drive' the winnebago with license plate (id) 'eagle5'.  \" +\r\n                    \"Here are the keys - have fun!\");\r\n        } else {\r\n            log.info(\"Sorry, you aren't allowed to drive the 'eagle5' winnebago!\");\r\n        }\r\n\r\n        //ç”¨æˆ·é€€å‡ºç™»é™†\r\n        currentUser.logout();\r\n\r\n        System.exit(0);\r\n    }\r\n}\r\n```",
      "data": {
        "title": "Shiro åˆä½“éªŒ",
        "date": "2019-11-08 17:39:44",
        "tags": [
          "Shiro"
        ],
        "published": true,
        "hideInList": false,
        "feature": "/post-images/shiro-01.png"
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "Shiro æ˜¯ä¸€ä¸ªJavaå®‰å…¨æ¡†æ¶ï¼Œä¸»è¦æ˜¯è¿›è¡Œèº«ä»½è®¤è¯ï¼Œæƒé™è®¤è¯ï¼Œå¯†ç åŠ å¯†ï¼Œä¼šè¯ç®¡ç†çš„ä¸€å¥—æ¡†æ¶ï¼Œä¸‹é¢è®©æˆ‘ä»¬ä¸€èµ·æ¥è®¤è¯†ä¸€ä¸‹Shiroå§!\r",
      "fileName": "shiro-01"
    },
    {
      "content": "ä¸‡ä¸ˆé«˜æ¥¼å¹³åœ°èµ·ï¼ŒæŒæ¡å¹¶ç‰¢è®°åŸºç¡€çŸ¥è¯†ï¼Œæ˜¯å­¦ä¹ åé¢çŸ¥è¯†çš„æ ¹åŸºï¼Œä¸‹é¢æˆ‘ä»¬ä¸€èµ·å›é¡¾ä¸€ä¸‹Javaçš„åŸºç¡€çŸ¥è¯†å§ï¼\r\n<!-- more -->\r\n\r\n## ä¸€ã€åŸºç¡€éƒ¨åˆ†\r\n\r\n### 1ã€åŸºæœ¬æ•°æ®ç±»å‹8ä¸­\r\n\r\n```JAVA\r\nå››ç§æ•´æ•°å‹ï¼šbyte(8)ã€short(16)ã€int(32)ã€long(64)\r\n\r\näºŒç§æµ®ç‚¹å‹ï¼šfloat(32)ã€double(64)\r\n\r\nä¸€ç§å­—ç¬¦å‹ï¼šchar(16)\r\n\r\nä¸€ç§å¸ƒå°”å‹ï¼šboolean\r\n```\r\n\r\n### 2ã€Objectç±»å¸¸ç”¨æ–¹æ³•\r\n\r\n```java\r\nEquals\r\nHashcode\r\ntoString\r\nwait\r\nnotify\r\nnotifyAll\r\nclone\r\ngetClass\r\nfinalize\r\n```\r\n\r\n### 3ã€å€¼ä¼ é€’ã€å¼•ç”¨ä¼ é€’\r\n\r\nJavaä¸­æ˜¯å€¼ä¼ é€’ï¼Œå¯¹äºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œä¼ é€’çš„æ˜¯å€¼çš„å‰¯æœ¬ï¼Œå¯¹äºå¼•ç”¨ç±»å‹ä¼ é€’çš„æ˜¯å¯¹è±¡åœ°å€çš„å‰¯æœ¬ã€‚\r\n\r\n```java\r\npackage com.itbofeng;\r\n\r\npublic class TestValuePassRefPass {\r\n    public static void main(String[] args) {\r\n        int i=100;\r\n        String str=\"aa\";\r\n        changeInt(i);\r\n        changeString(str);\r\n        System.out.println(i);//100\r\n        System.out.println(str);//aa\r\n    }\r\n    private static void changeInt(int i) {\r\n        i=0;\r\n    }\r\n    private static void changeString(String str) {\r\n        str=\"bb\";\r\n    }\r\n}\r\n```\r\n\r\n### 4ã€æ•°ç»„å®ä¾‹åŒ–\r\n\r\n```JAVA\r\n1ã€æ•°ç»„ä¸€æ—¦å®ä¾‹åŒ–ï¼Œå®ƒçš„é•¿åº¦å°±æ˜¯å›ºå®šçš„\r\n\r\n2ã€é™æ€å®ä¾‹åŒ–:```java int[] a=new int[]{1,3,3}``` , ```java int[] a={1,3,3}```\r\n   åŠ¨æ€å®ä¾‹åŒ–ï¼šå®ä¾‹åŒ–æ•°ç»„çš„æ—¶å€™ï¼ŒåªæŒ‡å®šäº†æ•°ç»„ç¨‹åº¦ï¼Œæ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ éƒ½æ˜¯æ•°ç»„ç±»å‹çš„é»˜è®¤å€¼\r\n\r\n3ã€æ•°ç»„ååº\r\n  1ã€å°†åŸæ•°ç»„ä¸­çš„å…ƒç´ è¿›è¡Œé€†åºï¼ˆåŸæ•°ç»„æ”¹å˜ï¼Œå ç”¨å†…å­˜å°ï¼‰\r\n  public void arrayReverse() {\r\n        int []originArray={1,2,3,4,5}\r\n        int temp = 0;\r\n        for (int i = 0; i < length / 2; i++) {\r\n            temp = originArray[i];\r\n            originArray[i] = originArray[length - i - 1];\r\n            originArray[length - i - 1] = temp;\r\n        }\r\n  }\r\n  2ã€åˆ›å»ºæ–°æ•°ç»„é€†åºå­˜å‚¨åŸæ•°ç»„å…ƒç´ ï¼ˆåŸæ•°ç»„ä¸å˜ï¼Œå ç”¨å†…å­˜å¤§ï¼‰\r\n  public void arrayReverse() {\r\n        int []originArray={1,2,3,4,5}\r\n        int length=originArray.length;\r\n        int []reverseArray = new int[length];\r\n        for (int i = 0; i < length; i++) {\r\n            reverseArray[i] = originArray[length - i - 1];\r\n        }\r\n  }\r\n```\r\n\r\n### 5ã€&å’Œ&&çš„åŒºåˆ« ã€|å’Œ||çš„åŒºåˆ« \r\n\r\n```java\r\n\t&å’Œ&&éƒ½å¯ä»¥ç”¨ä½œé€»è¾‘ä¸çš„è¿ç®—ç¬¦ï¼Œè¡¨ç¤ºé€»è¾‘ä¸ï¼ˆandï¼‰ï¼Œå½“è¿ç®—ç¬¦ä¸¤è¾¹çš„è¡¨è¾¾å¼çš„ç»“æœéƒ½ä¸ºtrueæ—¶ï¼Œæ•´ä¸ªè¿ç®—ç»“æœæ‰ä¸ºtrueï¼Œå¦åˆ™ï¼Œåªè¦æœ‰ä¸€æ–¹ä¸ºfalseï¼Œåˆ™ç»“æœä¸ºfalseã€‚\r\n\t&&å…·æœ‰çŸ­è·¯çš„åŠŸèƒ½,&ä¸å…·å¤‡çŸ­è·¯çš„åŠŸèƒ½\r\n\t|å’Œ||éƒ½å¯ä»¥ç”¨ä½œé€»è¾‘æˆ–çš„è¿ç®—ç¬¦ï¼Œè¡¨ç¤ºé€»è¾‘æˆ–ï¼ˆorï¼‰ï¼Œå½“è¿ç®—ç¬¦ä¸¤è¾¹çš„è¡¨è¾¾å¼çš„ç»“æœæœ‰ä¸€ä¸ªä¸ºtrueæ—¶ï¼Œæ•´ä¸ªè¿ç®—ç»“æœæ‰ä¸ºtrueï¼Œå¦åˆ™ï¼Œåªæœ‰å…¨éƒ¨ä¸ºfalseï¼Œåˆ™ç»“æœä¸ºfalseã€‚\r\n\t||å…·æœ‰çŸ­è·¯çš„åŠŸèƒ½,|ä¸å…·å¤‡çŸ­è·¯çš„åŠŸèƒ½\r\n```\r\n\r\n### 6ã€Stringå’ŒStringBuilderï¼ŒStringBufferçš„åŒºåˆ«\r\n\r\n```Java\r\n\t1ã€Stringå¯¹è±¡ï¥§å¯å˜ï¼Œå› æ­¤åœ¨è¿›â¾ä»»ä½•å†…å®¹ä¸Šçš„ä¿®æ”¹æ—¶éƒ½ä¼šåˆ›å»ºæ–°çš„å­—ç¬¦ï¤…å¯¹è±¡ï¼Œä¿®æ”¹æ“ä½œå¤ªå¤šé€ æˆèµ„æºæµªè´¹ã€‚\r\n    2ã€StringBuilderå’ŒStringBufferä¿®æ”¹å­—ç¬¦ä¸²ä¸æ˜¯åˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œè€Œæ˜¯åœ¨åŸå¯¹è±¡ä¸Šé¢è¿›è¡Œä¿®æ”¹ã€‚\r\n    3ã€StringBufferçº¿ç¨‹å®‰å…¨çš„æ˜¯ StringBuilderæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼ŒStringBuilderæ•ˆç‡æ¯”StringBufferé«˜ã€‚\r\n```\r\n\r\n### 7ã€HashMapã€HashTableã€ ConcurrentHashMap çš„åŒºåˆ«\r\n\r\n```Java\r\n    1ã€HashMapä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€HashTableã€ConcurrentHashMapæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚\r\n    2ã€HashTableæ˜¯synchronizedé”å®šæ–¹æ³•ï¼Œåœ¨é«˜å¹¶å‘ç¯å¢ƒä¸‹æ•ˆç‡æ¯”è¾ƒä½ï¼ŒConcurrentHashMapé‡‡ç”¨åˆ†æ®µé”ï¼Œä»è€Œå¢åŠ å¹¶å‘æ€§èƒ½ã€‚\r\n    å¤‡æ³¨ï¼šåœ¨æºç è®²è§£ä¸­ä¼šåˆ†åˆ«å¯¹HashMapã€HashTableã€ConcurrentHashMapè¿›è¡Œè®²è§£ã€‚\r\n```\r\n\r\n### 8ã€switch è¯­æ³•\r\n\r\n```java\r\n    1ã€åœ¨switchï¼ˆexpï¼‰ä¸­ï¼Œexpåªèƒ½æ˜¯ä¸€ä¸ªæ•´æ•°è¡¨è¾¾å¼æˆ–è€…æšä¸¾å¸¸é‡ï¼ˆæ›´å¤§å­—ä½“ï¼‰ï¼Œæ•´æ•°è¡¨è¾¾å¼å¯ä»¥æ˜¯intåŸºæœ¬ç±»å‹æˆ–IntegeråŒ…è£…ç±»å‹ï¼Œç”±äºï¼Œbyte,short,charéƒ½å¯ä»¥éšå«è½¬æ¢ä¸ºintï¼Œæ‰€ä»¥ï¼Œè¿™äº›ç±»å‹ä»¥åŠè¿™äº›ç±»å‹çš„åŒ…è£…ç±»å‹ä¹Ÿæ˜¯å¯ä»¥çš„\r\n    2ã€ä»Java SE 7å¼€å§‹ï¼Œswitch æ”¯æŒå­—ç¬¦ä¸² String ç±»å‹äº†ï¼ŒåŒæ—¶ case æ ‡ç­¾å¿…é¡»ä¸ºå­—ç¬¦ä¸²å¸¸é‡æˆ–å­—é¢é‡ã€‚\r\n    3ã€Longã€Doubleä¸æ”¯æŒ éæ•´æ•°è¡¨è¾¾å¼æˆ–è€…æšä¸¾å¸¸é‡ä»¥åŠå­—ç¬¦ä¸²\r\n```\r\n\r\n### 9ã€å¤§æ•°è®¡ç®—æ€è·¯\r\n\r\n```java\r\n\tè€ƒç‚¹ï¼š\r\n        1ã€è®¡ç®—æœºåŸç†\r\n        2ã€è®¡ç®—æœºä¸­çš„ç®—æœ¯è¿ç®—ä¼šå‘ç”Ÿè¶Šç•Œçš„æƒ…å†µ\r\n        3ã€å…·å¤‡ä¸€å®šçš„é¢å‘å¯¹è±¡çš„è®¾è®¡æ€æƒ³\r\n    æ€è·¯ï¼š\r\n        1ã€è®¡ç®—æœºåŸç†ï¼ˆåŸç ã€åç ã€è¡¥ç ï¼‰\r\n        2ã€é¢å‘å¯¹è±¡è®¾è®¡\r\n    å®ç°ï¼š\r\n        1ã€è¿™ä¸ªç±»å†…éƒ¨æœ‰ä¸¤ä¸ªæˆå‘˜å˜é‡ï¼Œä¸€ä¸ªè¡¨ç¤ºç¬¦å·ï¼Œå¦ä¸€ä¸ªç”¨å­—èŠ‚æ•°ç»„è¡¨ç¤ºæ•°å€¼çš„äºŒè¿›åˆ¶æ•°\r\n        2ã€æœ‰ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼ŒæŠŠä¸€ä¸ªåŒ…å«æœ‰å¤šä½æ•°å€¼çš„å­—ç¬¦ä¸²è½¬æ¢åˆ°å†…éƒ¨çš„ç¬¦å·å’Œå­—èŠ‚æ•°ç»„ä¸­\r\n        3ã€æä¾›åŠ å‡ä¹˜é™¤çš„åŠŸèƒ½\r\n    ä»£ç ï¼š\r\n        public class BigInteger{\r\n            byte sign;\r\n            byte[] val;\r\n            public Biginteger(String val)\t{\r\n                sign =a ;\r\n                val = ;\r\n            }\r\n            public BigInteger add(BigInteger other)\t{\r\n\r\n            }\r\n            public BigInteger subtract(BigInteger other)\t{\r\n\r\n            }\r\n            public BigInteger multiply(BigInteger other){\r\n\r\n            }\r\n            public BigInteger divide(BigInteger other){\r\n\r\n            }\r\n        }\r\n\r\n```\r\n\r\n### 10ã€\"==\"å’Œequalsæ–¹æ³•  \r\n\r\n```java\r\n\t1ã€å¯¹äºå¼•ç”¨ç±»å‹ï¼Œæ¶‰åŠäº†ä¸¤å—å†…å­˜ï¼Œå¯¹è±¡æœ¬èº«å ç”¨ä¸€å—å†…å­˜ï¼ˆå †ï¼‰ï¼Œå˜é‡ä¹Ÿå ç”¨ä¸€å—å†…å­˜ï¼ˆæ ˆï¼‰ï¼Œä¾‹å¦‚Objet obj = new Object();å˜é‡objæ˜¯ä¸€ä¸ªå†…å­˜ï¼Œnew Object()æ˜¯å¦ä¸€ä¸ªå†…å­˜ï¼Œæ­¤æ—¶ï¼Œå˜é‡objæ‰€å¯¹åº”çš„å†…å­˜ä¸­å­˜å‚¨çš„æ•°å€¼å°±æ˜¯å¯¹è±¡å ç”¨çš„é‚£å—å†…å­˜çš„é¦–åœ°å€ã€‚\r\n\t2ã€==\r\n      ==æ“ä½œç¬¦ä¸“é—¨ç”¨æ¥æ¯”è¾ƒåŸºæœ¬æ•°æ®ç±»å‹çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œä»¥åŠå¼•ç”¨ç±»å‹çš„å˜é‡åœ°å€æ˜¯å¦ç›¸ç­‰ï¼Œå³æ¯”è¾ƒæ ˆä¸­å€¼æ˜¯å¦ç›¸ç­‰\r\n    3ã€equals\r\n      equalsæ–¹æ³•æ˜¯Java Objectç±»ä¸­çš„æ–¹æ³•ï¼Œåœ¨Objectç±»ä¸­equalsçš„å®ç°æ˜¯ç­‰åŒäº==ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡æ²¡æœ‰é‡å†™equalsæ–¹æ³•ï¼Œé‚£ä¹ˆæ­¤æ—¶equalsæ–¹æ³•ç­‰åŒäº==ï¼Œä½†æ˜¯åœ¨è®¸å¤šå¯¹è±¡æ¯”è¾ƒä¸­ï¼Œä¾‹å¦‚å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬å®é™…éœ€è¦æ¯”è¾ƒçš„å¯¹è±¡çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œè€Œä¸æ˜¯å˜é‡çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œé‚£ä¹ˆæ­¤æ—¶éœ€è¦é‡å†™equals\r\n```\r\n\r\n### 11ã€åŸºæœ¬æ•°æ®ç±»å‹å’ŒåŒ…è£…ç±»å‹çš„åŒºåˆ«\r\n\r\n```Java\r\n    1ã€åŸºæœ¬ç±»å‹å’ŒåŒ…è£…ç±»å‹çš„é»˜è®¤å€¼ä¸åŒï¼ŒåŸºæœ¬ç±»å‹æœ‰è‡ªå·±çš„é»˜è®¤å€¼ï¼ŒåŒ…è£…ç±»å‹é»˜è®¤å€¼æ˜¯null\r\n    2ã€åŸºæœ¬ç±»å‹==æ¯”è¾ƒçš„æ˜¯å€¼ï¼ŒåŒ…è£…ç±»å‹==æ¯”è¾ƒçš„æ˜¯å˜é‡åœ°å€\r\n    3ã€åŒ…è£…ç±»å‹æä¾›äº†å¾ˆå¤šå…¶ä»–çš„æ–¹æ³•\r\n```\r\n\r\n### 12ã€ä½œç”¨åŸŸpublicï¼Œprivateï¼Œprotectedï¼Œä»¥åŠä¸å†™æ—¶ï¼ˆfriendlyï¼‰åŒºåˆ«  \r\n\r\n|  ä½œç”¨åŸŸ    | å½“å‰ç±»  | åŒä¸€åŒ…  | å­å­™ç±»  | å…¶ä»–åŒ…  |\r\n| :-------: | :----: | :----: | :----: | :----: |\r\n|  public   |   âˆš    |   âˆš    |   âˆš    |   âˆš    |\r\n| protected |   âˆš    |   âˆš    |   âˆš    |   Ã—    |\r\n| friendly  |   âˆš    |   âˆš    |   Ã—    |   Ã—    |\r\n|  private  |   âˆš    |   Ã—    |   Ã—    |   Ã—    |\r\n\r\n### 13ã€é™æ€å˜é‡å’Œå®ä¾‹å˜é‡çš„åŒºåˆ«  \r\n\r\n```Java\r\n    1ã€åœ¨è¯­æ³•å®šä¹‰ä¸Šçš„åŒºåˆ«ï¼šé™æ€å˜é‡å‰è¦åŠ staticå…³é”®å­—ï¼Œè€Œå®ä¾‹å˜é‡å‰åˆ™ä¸åŠ \r\n    2ã€åœ¨ç¨‹åºè¿è¡Œæ—¶çš„åŒºåˆ«ï¼šå®ä¾‹å˜é‡å±äºæŸä¸ªå¯¹è±¡çš„å±æ€§ï¼Œå¿…é¡»åˆ›å»ºäº†å®ä¾‹å¯¹è±¡ï¼Œå…¶ä¸­çš„å®ä¾‹å˜é‡æ‰ä¼šè¢«åˆ†é…ç©ºé—´ï¼Œæ‰èƒ½ä½¿ç”¨è¿™ä¸ªå®ä¾‹å˜é‡ã€‚é™æ€å˜é‡ä¸å±äºæŸä¸ªå®ä¾‹å¯¹è±¡ï¼Œè€Œæ˜¯å±äºç±»ï¼Œæ‰€ä»¥ä¹Ÿç§°ä¸ºç±»å˜é‡ï¼Œåªè¦ç¨‹åºåŠ è½½äº†ç±»çš„å­—èŠ‚ç ï¼Œä¸ç”¨åˆ›å»ºä»»ä½•å®ä¾‹å¯¹è±¡ï¼Œé™æ€å˜é‡å°±ä¼šè¢«åˆ†é…ç©ºé—´ï¼Œé™æ€å˜é‡å°±å¯ä»¥è¢«ä½¿ç”¨äº†ã€‚æ€»ä¹‹ï¼Œå®ä¾‹å˜é‡å¿…é¡»åˆ›å»ºå¯¹è±¡åæ‰å¯ä»¥é€šè¿‡è¿™ä¸ªå¯¹è±¡æ¥ä½¿ç”¨ï¼Œé™æ€å˜é‡åˆ™å¯ä»¥ç›´æ¥ä½¿ç”¨ç±»åæ¥å¼•ç”¨ã€‚\r\n```\r\n\r\n### 14ã€é‡è½½(Overload)&é‡å†™ï¼ˆOverrideï¼‰\r\n\r\n```JAVA\r\n    1ã€é‡è½½ï¼šæ˜¯åœ¨ä¸€ä¸ªç±»é‡Œé¢ï¼Œæ–¹æ³•åå­—ç›¸åŒï¼Œè€Œå‚æ•°ä¸åŒã€‚è¿”å›ç±»å‹å¯ä»¥ç›¸åŒä¹Ÿå¯ä»¥ä¸åŒã€‚æ¯ä¸ªé‡è½½çš„æ–¹æ³•ï¼ˆæˆ–è€…æ„é€ å‡½æ•°ï¼‰éƒ½å¿…é¡»æœ‰ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„å‚æ•°ç±»å‹åˆ—è¡¨ã€‚\r\n    2ã€é‡å†™ï¼šå­ç±»å¯¹çˆ¶ç±»çš„å…è®¸è®¿é—®çš„æ–¹æ³•çš„å®ç°è¿‡ç¨‹è¿›è¡Œé‡æ–°ç¼–å†™, è¿”å›å€¼å’Œå½¢å‚éƒ½ä¸èƒ½æ”¹å˜ã€‚\r\n```\r\n\r\n### 15ã€continue &  break \r\n\r\n```JAVA\r\n    1ã€continue:åœ¨å¾ªç¯è¯­å¥ä¸­,å®ƒä¼šä¸­æ–­æ­£å¸¸çš„æ§åˆ¶æµç¨‹ï¼Œè·³å‡ºå½“æ¬¡å¾ªç¯,ç„¶åç»§ç»­ä¸‹ä¸€æ¬¡å¾ªç¯ï¼›\r\n    2ã€breakï¼šå¯ç”¨åœ¨å¾ªç¯,åˆ¤æ–­ç­‰è¯­å¥ä¸­,ç”¨äºé€€å‡ºå½“å‰è¯­å¥ï¼Œåœ¨å¾ªç¯è¯­å¥ä¸­å°±æ˜¯é€€å‡ºå½“å‰å¾ªç¯ï¼›\r\n```\r\n\r\n### 16ã€final å…³é”®å­—\r\n\r\n### 17ã€this å…³é”®å­—\r\n\r\n### 18ã€transient å…³é”®å­—\r\n\r\n### 19ã€instanceof å…³é”®å­—\r\n\r\n### 20ã€å­—ç¬¦å‹å¸¸é‡å’Œå­—ç¬¦ä¸²å¸¸é‡çš„åŒºåˆ« \r\n\r\n### 21ã€æˆå‘˜å˜é‡ä¸å±€éƒ¨å˜é‡çš„åŒºåˆ«æœ‰é‚£äº›\r\n\r\n### 22ã€è‡ªåŠ¨æ‹†ç®±è£…ç®±\r\n\r\n### 23ã€æ¥å£&æŠ½è±¡ç±»\r\n\r\n### 24ã€Java å¼•ç”¨\r\n\r\n### 25ã€hashCode&equals\r\n\r\n### 26ã€Comparableå’ŒComparator\r\n\r\n\r\n\r\n## äºŒã€é¢å‘å¯¹è±¡éƒ¨åˆ†\r\n\r\n## ä¸‰ã€WEBç›¸å…³éƒ¨åˆ†\r\n\r\nâ¤ï¸â¤ï¸â¤ï¸æœªå®Œå¾…ç»­â¤ï¸â¤ï¸â¤ï¸\r\n\r\n\r\n",
      "data": {
        "title": "JavaåŸºç¡€çŸ¥è¯†",
        "date": "2019-11-07 16:05:09",
        "tags": [
          "Java"
        ],
        "published": true,
        "hideInList": false,
        "feature": "/post-images/java-ji-chu-zhi-shi.png"
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "ä¸‡ä¸ˆé«˜æ¥¼å¹³åœ°èµ·ï¼ŒæŒæ¡å¹¶ç‰¢è®°åŸºç¡€çŸ¥è¯†ï¼Œæ˜¯å­¦ä¹ åé¢çŸ¥è¯†çš„æ ¹åŸºï¼Œä¸‹é¢æˆ‘ä»¬ä¸€èµ·å›é¡¾ä¸€ä¸‹Javaçš„åŸºç¡€çŸ¥è¯†å§ï¼\r",
      "fileName": "java-ji-chu-zhi-shi"
    },
    {
      "content": "## â¤ï¸ æ¬¢è¿è¯­\n> æ¬¢è¿æ¥åˆ°æˆ‘çš„å°ç«™å‘€ï¼Œå¾ˆé«˜å…´é‡è§ä½ ï¼ğŸ¤\n\n## ğŸ  å…³äºæœ¬ç«™\n> è¿™æ˜¯æˆ‘çš„åšå®¢ï¼Œä¸»è¦æ˜¯è®°å½•ä¸€äº›ITæŠ€æœ¯æ–¹é¢çš„çŸ¥è¯†ï¼Œä»¥åŠä¸€äº›ç”Ÿæ´»ä½“ä¼šã€‚\n\n## ğŸ“ è”ç³»æˆ‘å‘€\n> æˆ‘çš„é‚®ç®±ï¼šbofengsun@163.com\n> å¾®ä¿¡å…¬ä¼—å·ï¼šæœç´¢â€œç©å‘½æœ‰äººç–¼â€",
      "data": {
        "title": "å…³äº",
        "date": "2019-01-25 19:09:48",
        "tags": [],
        "published": true,
        "hideInList": true,
        "feature": null
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "about"
    }
  ],
  "tags": [
    {
      "name": "Jmeter",
      "slug": "-XHsEfy82",
      "used": true
    },
    {
      "name": "Shiro",
      "slug": "3pUmHBzD3",
      "used": true
    },
    {
      "name": "Java",
      "slug": "qpWMRguFz",
      "used": true
    },
    {
      "name": "Authentication",
      "slug": "kY59_WAGg",
      "used": false
    },
    {
      "name": "Gridea",
      "slug": "y28fz_ap3",
      "used": false
    }
  ],
  "menus": [
    {
      "link": "/",
      "name": "é¦–é¡µ",
      "openType": "Internal"
    },
    {
      "link": "/archives",
      "name": "å½’æ¡£",
      "openType": "Internal"
    },
    {
      "link": "/tags",
      "name": "æ ‡ç­¾",
      "openType": "Internal"
    },
    {
      "link": "/post/about",
      "name": "å…³äº",
      "openType": "Internal"
    }
  ]
}